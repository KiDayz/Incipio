{% extends "Project/layout.html.twig" %}

{% set tab= "tab3" %}

{% block title %}
    Modifier la mission
{% endblock %}

{% block content_bundle %}


    {{ form_start(form, {'attr': {'name': 'missionsForm'}}) }}
    
    {% include 'Project/Mission/formulaire.html.twig'%}

    <p>
        <button type="submit" class="btn btn-success">{{ 'suivi.mission_enregistrer'|trans({}, 'project') }}</button>
    </p>
    {{ form_widget(form._token) }}
    <div class="hidden">
        {{ form_rest(form) }}
    </div>
    {{ form_end(form) }}

    <form class="bootbox-confirm" data-content="{{ 'suivi.proces_verbal_supprimer_confirmation'|trans({}, 'project') }}"
            action="{{ path('project_mission_supprimer', { 'id': form.vars.value.id }) }}" method="post">
            {{ form_widget(delete_form) }}
            <button class="btn btn-danger">{{ 'suivi.supprimer'|trans({}, 'project') }}</button>
    </form>

{% endblock %}

    {% block javascript %}
        {{ parent() }}
        {{ form_javascript(form) }}

        <script type="text/javascript">

            var isDirty = false;
            //Verification avant de quitter
            $(':input').change(function () {
                if (!isDirty) {
                    isDirty = true;
                }
            });
            $(window).bind('beforeunload', function () {
                if (isDirty)
                    return "Voulez-vous quitter sans enregistrer ?";
            });
            $('form').submit(function () {
                isDirty = false;
                return true;
            });

        </script>
    {% endblock %}
